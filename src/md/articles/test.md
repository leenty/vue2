<!--{
"title": "test",
"date": "2016/12/11",
"path": "qwe",
"tag": ""
}-->

æ‰¿æ¥ä¸Šæ–‡[vue2.0ä¸€èµ·åœ¨æ‡µé€¼çš„æµ·æ´‹é‡Œè¶Šé™·è¶Šæ·±ï¼ˆä¸€ï¼‰](http://www.leenty.com/2016/10/21/vue2-1/)
### è¯´å¥½äº†ä¸€èµ·æ‡µé€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­ä¸‹æ²‰
åœ¨ä¸Šä¸€ç¯‡é‡Œå·²ç»å°†vue2.0éœ€è¦çš„ä¾èµ–éƒ½è£…é½äº†
é‚£ä¹ˆæ¥ä¸‹æ¥
![qwee](http://upload-images.jianshu.io/upload_images/2005796-3fc063c8fb0b1fba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
å› ä¸ºvueæœ€åç”Ÿæˆçš„é¡µé¢çœ‹ä¼¼é™æ€é¡µé¢(å¯¹äºé™æ€é¡µé¢è¿™é‡Œæœ‰äº›å·é¸¡ç”¨æ³•ï¼Œä¸ç®¡ä½ æ€æ ·ï¼Œåæ­£æˆ‘å·²ç»éœ²å‡ºäº†è¯¡å¼‚çš„å¾®ç¬‘ğŸ˜ï¼Œå†è´´ä¸€ä¸ª[vue2.0 demoçš„é¡¹ç›®åœ°å€](https://github.com/leenty/vue2)ï¼Œå¤§çˆ·æœ‰å…´è¶£å¯è¿›å»çœ‹çœ‹æ¼”ç¤ºï¼Œå¼€å¿ƒäº†å°±åŠ ä¸ªæ˜Ÿ)ï¼Œå…¶å®å´æ˜¯ä¸ªSPA(å•é¡µé¢åº”ç”¨)
æ²¡é”™ï¼å°±æ˜¯ä¸€ä¸ªSPA

### ä½œä¸ºä¸€ä¸ªSPAï¼Œå½“ç„¶æœ‰ä¸åŒçš„åœ°æ–¹
SPAä¸ä¼ ç»Ÿç½‘é¡µåŒºåˆ«çš„åœ°æ–¹æ˜¯SPAå…·æœ‰å‰ç«¯è·¯ç”±æ¥æ¨¡æ‹Ÿé¡µé¢è·³è½¬ï¼Œå½“ç„¶è¿™æ˜¯ä¼—å¤šä¸åŒä¹‹ä¸€ï¼Œè¿™ç¯‡åªè¯´å‰ç«¯è·¯ç”±ã€‚
ä¸Šä¸€ç¯‡ä¸­æœ‰å®‰è£…vue-routerç»„ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯vueçš„å‰ç«¯è·¯ç”±
vue + vue-routerç®€ç›´æ˜¯çˆ½ï¼Œé¡µé¢è·³è½¬çš„é€Ÿåº¦ç®€ç›´æ˜¯ä¸è¦ä¸è¦çš„
ä¸å…‰æ˜¯ç”¨æˆ·ä½“éªŒä¸Šçš„æå‡ï¼Œä½œä¸ºä¸€åå¼€å‘è€…ï¼Œåœ¨ä½¿ç”¨äº†å¦‚vueï¼Œreactç­‰è¿™ç±»MVVMæ¡†æ¶åï¼Œå°±ä¸ä¼šå†æƒ³å›åˆ°jQueryçš„æ—¶ä»£äº†ã€‚

### å‰é¢æäº†åŠå¤©ï¼Œç°åœ¨è¦å¼€å§‹codingå•¦ï¼
å¥½çš„ï¼Œç”¨è‡ªå·±çš„å°ç¼–è¾‘å™¨æ‰“å¼€vueé¡¹ç›®ï¼ˆæˆ‘ç”¨çš„æ˜¯sublimeï¼‰
å¯ä»¥çœ‹åˆ°é¡¹ç›®ç›®å½•æ˜¯è¿™æ ·å­çš„
![files-tree](http://upload-images.jianshu.io/upload_images/2005796-e8d30c83712c89f2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
(æ’ä¸€å¥ï¼Œå¦‚æœå–œæ¬¢è¿™ä¸ªsublimeä¸»é¢˜å¯ä»¥[æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ](http://www.leenty.com/2016/10/06/sublime-material-theme/))
ä¸è‡ªå·±çš„ç›®å½•å¯¹æ¯”å‘ç°å°‘å‡ ä¸ªæ–‡ä»¶ï¼Œé‚£æ˜¯æ²¡æœ‰ä»€ä¹ˆå…³ç³»çš„ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å»åˆ›å»ºè¿™äº›æ–‡ä»¶ã€‚

### ä½œä¸ºä¸€ä¸ªSPAï¼Œé¦–å…ˆè¦æœ‰è·¯ç”±
ä»ç›®å½•å›¾ç‰‡é‡Œå¯ä»¥çœ‹åˆ°`main.js`è¿™ä¸ªæ–‡ä»¶ï¼Œæ²¡é”™è¿™ä¸ªå°±æ˜¯ç¨‹åºçš„å…¥å£
è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹æ˜¯è¿™æ ·çš„
```js
import Vue from 'vue'
import router from './router'

import App from './App'

/* eslint-disable no-new */
new Vue({
  router,
  render: h => h(App)
}).$mount('#app')
```
[`main.js`åœ°å€](https://github.com/leenty/vue2/blob/master/src/main.js)
è¿™é‡Œç”¨çš„æ˜¯ES6çš„è¯­æ³•ï¼Œä½¿ç”¨`import`æ¥å¯¼å…¥åŒ…
è¿™é‡Œå¯¼å…¥äº†vueåŒ…ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯`router.js`å’Œ`App.vue`
`.js`åç¼€æ˜¯å¯ä»¥çœç•¥çš„(æ¯•ç«Ÿæ˜¯äº²ç”Ÿçš„ï¼Œä½ ä¸è¯´å¯¼å…¥ä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ï¼Œè‚¯å®šæ˜¯è‡ªå®¶äººæ¯•ç«Ÿäº²å‘€)
å…¶å®`.vue`åç¼€ä¹Ÿæ˜¯å¯ä»¥çœç•¥çš„ï¼Œæˆ‘å»ºè®®è¿˜æ˜¯å†™ä¸€ä¸‹ï¼Œå¦‚æœé‡åˆ°ä¸¤ä¸ªåŒåæ–‡ä»¶å°±å°´å°¬äº†ã€‚

å¥½çš„ï¼Œè¿™ä¸ª`router.js`å°±æ˜¯è·¯ç”±çš„è¾“å‡ºå£å•¦ï¼Œ
`App.vue`å°±æ˜¯ç›®å½•é‡Œå·²ç»å­˜åœ¨çš„é‚£ä¸ªæ¨¡æ¿æ–‡ä»¶å•¦ï¼Œä½ çš„ç•Œé¢å°±ä»è¿™é‡Œå¼€å§‹å•¦ã€‚
å¼•å…¥äº†åŒ…å°±å¯ä»¥å¼€å§‹è®¾ç½®è·¯ç”±å’ŒæŒ‚è½½æ¨¡æ¿äº†

é¡ºå¸¦ä¸€æï¼Œå¯ä»¥çœ‹åˆ°åœ¨`new Vue()`æ—¶ä¼ å…¥äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡å´ä¸æ˜¯é”®å€¼å¯¹ï¼Œ
æ˜¯è¿™æ ·ï¼Œè¿™æ˜¯ES6çš„ä¸€ç§è¯­æ³•ï¼Œå½“å¼•ç”¨çš„å˜é‡åå’Œé”®åç›¸åŒæ—¶ï¼Œå°±å¯ä»¥ç®€å†™æˆè¿™æ ·
å¦‚æœè¿˜åŸæ¥æ˜¯è¿™æ ·çš„
```js
new Vue({
  router: router,
  render: h => h(App)
}).$mount('app')
// è¢«ç®€å†™æˆäº†
new Vue({
  router, // è¿™æ˜¯ES6å¯¹è±¡çš„ç®€å†™ï¼Œæ‰©å±•å¼€å°±æ˜¯router: router
  // ç®­å¤´å‡½æ•°(=>)æ˜¯ES6çš„æ–°è¯­æ³•
  render: h => h(App) // è¿™é‡Œæ‰©å±•å¼€å°±æ˜¯render: (h) => { return h(App) }
}).$mount('app')
```
PSï¼šES6çš„æ–°è¯­æ³•ç°åœ¨ç½‘ä¸Šæ–‡ç« å·²ç»æœ‰å¾ˆå¤šäº†ï¼Œæˆ‘ä¹‹åä¹Ÿä¼šå‘ä¸€ç‰ˆå¸¸ç”¨çš„è¯­æ³•

### é‚£ä¹ˆç°åœ¨åœ¨srcç›®å½•ä¸‹åˆ›å»º`router.js`æ–‡ä»¶
å†…å®¹æ˜¯è¿™æ ·çš„ï¼š
```js
import Vue from 'vue'
import VueRouter from 'vue-router'
import routes from './routes'

// å‘Šè¯‰vueè¦ä½¿ç”¨router
Vue.use(VueRouter)

/* eslint-disable no-new */
// å®ä¾‹åŒ–routerå¯¹è±¡
const router = new VueRouter({
  mode: 'hash', // è®¾ç½®è·¯ç”±æ¨¡å¼ å¯é€‰å€¼: "hash" | "history" | "abstract"ï¼Œé»˜è®¤"hash"
  linkActiveClass: 'u-link--Active', // è¿™åªé“¾æ¥æ¿€æ´»æ—¶çš„class
  // base: '/app/', // è¿™ä¸ªæ˜¯è®¾ç½®æ ¹ç›®å½•è·¯å¾„ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œé»˜è®¤'/'
  routes // æŒ‚è½½è·¯ç”±é›†åˆ åé¢ä¼šè¯´
})
// å¯¼å‡ºrouterå¯¹è±¡
export default router
```
[è¿™æ˜¯`router.js`åœ°å€](https://github.com/leenty/vue2/blob/master/src/router.js)
è¿™é‡Œå¼•å…¥äº†ä¸¤ä¸ªåŒ…`vue`,`vue-router`å’Œä¸€ä¸ªåŒ…å«è·¯ç”±é›†åˆçš„`routes.js`æ–‡ä»¶
æ•´ä¸ªæ–‡ä»¶çš„é€»è¾‘å°±æ˜¯ï¼Œä½¿ç”¨`Vue.use()`æ–¹æ³•å‘Šè¯‰vueæˆ‘ä»¬ä½¿ç”¨äº†è·¯ç”±
ç„¶åå°±å¤§å¤§æ–¹æ–¹çš„å¯¼å‡ºè·¯ç”±å¯¹è±¡
![main.js router](http://upload-images.jianshu.io/upload_images/2005796-ebc26fa935c8cf9a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
è¿™ä¸ªæ—¶å€™`main.js`é‡Œå°±å¯ä»¥æ¥å—åˆ°è¿™é‡Œå¯¼å‡ºçš„è·¯ç”±å¯¹è±¡ï¼Œå¹¶æŒ‚è½½åˆ°vueå¯¹è±¡ä¸Š

### åœ¨srcç›®å½•ä¸‹åˆ›å»º`routes.js`æ–‡ä»¶
`routes.js`æ˜¯ç”¨æ¥æ”¾ç½®è·¯ç”±é›†åˆçš„æ–‡ä»¶
å…¶å®è·¯ç”±é›†åˆæ˜¯å¯ä»¥å†™åœ¨`router.js`é‡Œçš„ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆä¸å†™åœ¨ä¸€èµ·å‘¢ï¼Ÿ
å› ä¸ºå½“è·¯ç”±é›†åˆå˜å¾—åºå¤§æ—¶ï¼Œå¦‚æœè¿˜æ˜¯å†™åœ¨`router.js`é‡Œï¼Œå°±ä¼šæ˜¾å¾—æ‹¥æŒ¤ï¼Œä¸ä¾¿äºé˜…è¯»
æ‰€ä»¥è¿™é‡Œæ¨èå•ç‹¬å†™å‡ºæ¥ã€‚
åŒæ—¶å‘¢ä¹Ÿå¯ä»¥åˆ›å»ºè·¯ç”±æ‰€å¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶(`.vue`æ–‡ä»¶ï¼Œæˆ‘æŠŠå®ƒç§°ä¸ºæ¨¡æ¿æ–‡ä»¶)ï¼Œ`Article.vue`å’Œ`Home.vue`
æ¨¡æ¿æ–‡ä»¶å«ä»€ä¹ˆåç”±è‡ªå·±å†³å®šï¼Œäºæ˜¯å°±èƒ½çœ‹åˆ°è¿™å¼ å›¾é‡Œæ‰€æœ‰æ–‡ä»¶éƒ½é½äº†
![files-tree](http://upload-images.jianshu.io/upload_images/2005796-e8d30c83712c89f2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

é‚£ä¹ˆåœ¨ç¼–å†™`routes.js`æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦å…ˆå†™å¥½ä¸¤ä¸ªæ¨¡æ¿çš„å†…å®¹(ä¸ç„¶ä¸€ä¼šæœ‰æ²¡æœ‰æˆåŠŸéƒ½ä¸æ¸…æ¥šäº†ï¼Œ23333)

å¥½çš„ï¼Œè´´ä¸€ä¸‹`home.vue`çš„å†…å®¹
```html
<template lang="pug">
.home
  h1.l-ta--c Material Desgin
</template>

<script>
  export default {
    data () {
      return {
      }
    }
  }
</script>

<style lang="stylus">
</style>
```
vueæ¨¡æ¿æ˜¯htmlç»“æ„çš„ï¼Œè¿™ä¹Ÿæ˜¯å¯¹ç•Œé¢ç¼–å†™æœ€å‹å¥½çš„æ–¹å¼
é‡Œé¢çš„`<template> </template>`æ ‡ç­¾å°±æ˜¯è§†å›¾
`<script></script>`å°±æ˜¯jsï¼Œè¿™ä¸ªæ²¡æœ‰äº‰è®®
`<style></style>`æ˜¯å†™cssçš„ï¼Œè¿™ä¸ªä¹Ÿæ²¡æœ‰é—®é¢˜
ä½†æ˜¯å½“ä»”ç»†çœ‹æˆ‘çš„ä»£ç ï¼Œå‘ç°é‡Œé¢htmlä½¿ç”¨äº†pugï¼Œcssä½¿ç”¨äº†stylus
å…¶å®ä¸ç”¨ä»–ä»¬ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œåªæ˜¯ç”¨pugå’Œstyluså†™ç»“æ„æ¯”è¾ƒæ¸…æ™°
ä¸ç”¨ä¹Ÿå¯ä»¥çš„
å¦‚æœè¦ä½¿ç”¨ï¼Œè¯·æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œç»™é¡¹ç›®æ·»åŠ å‡ ä¸ªåŒ…
```shell
npm i pug stylus stylus-loader -D
```
é‡Œé¢çš„cssçš„class(`.l-ta--c`)çœ‹ç€æœ‰ç‚¹æ‡µé€¼çš„ï¼Œå¯ä»¥çœ‹çœ‹[ä½¿ç”¨BEM+emmetçš„cssä¹¦å†™ä¸å‘½åæŠ€å·§](http://www.leenty.com/2016/11/06/cssä¹¦å†™ä¸å‘½åæŠ€å·§/#main)
å¥½çš„ï¼Œæ¨¡æ¿ä¸éœ€è¦å¤ªå¤æ‚ï¼Œåªè¦æœ‰å­—èƒ½æ˜¾ç¤ºå°±å¥½äº†ï¼Œè‡³äº`Article.vue`ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œå°±ä¸è´´äº†

Tipsï¼šæ¨¡æ¿é‡Œæ¨èæœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œå°±åƒè¿™é‡Œçš„`.home`å°±æ˜¯æ ¹å…ƒç´ ï¼Œè¿™æ ·ä¸å®¹æ˜“æ··ä¹±ï¼Œç»“æ„ä¼šæ¸…æ™°

### å†™å¥½äº†æ¨¡æ¿å°±å¯ä»¥å¼€å§‹ç¼–å†™`routes.js`äº†
å…ˆè´´ä»£ç !
```js
// å¯¼å…¥ä¹‹å‰å†™å¥½çš„ä¸¤ä¸ªæ¨¡æ¿
import Home from './components/Home.vue'
import Article from './components/Article.vue'

// ç¼–å†™è·¯ç”±é›†åˆ
const routes = [
  {
    name: 'Home', // è·¯ç”±åï¼Œè¿™ä¸ªå­—æ®µæ˜¯å¯é€‰çš„
    path: '/', // è·¯ç”±è·¯å¾„ï¼Œè¿™é‡Œæ˜¯æ ¹è·¯å¾„æ‰€ä»¥æ˜¯'/'
    component: Home // æ¨¡æ¿
  }, // è¿™äº›æ˜¯å¸¸ç”¨çš„
  {
    name: 'Article',
    path: '/article',
    component: Article
  }
]
// å¯¼å‡ºè·¯ç”±é›†åˆ
export default routes
```
[ç„¶åæ˜¯æ–‡ä»¶åœ°å€](https://github.com/leenty/vue2/blob/master/src/routes.js)
æœ€åå¯¼å‡ºäº†è·¯ç”±é›†åˆ(`routes`)åå°±å¯ä»¥åœ¨`router.js`é‡Œä½¿ç”¨äº†
äºæ˜¯ï¼Œå‰é¢çš„`router.js`é‡Œçš„`routes`å°±æœ‰äº†ã€‚

### ç°åœ¨è¿›è¡Œæœ€åä¸€æ­¥ï¼Œåˆ°`App.vue`é‡Œæ·»åŠ è·¯ç”±
ä»£ç å¦‚ä¸‹ï¼š
```html
<template lang="pug">
  .app
    header
      //- åˆ¶ä½œä¸€ä¸ªè·³è½¬é“¾æ¥
      //- è¿™é‡Œä¸è¦ç›´æ¥ç”¨aé“¾æ¥è·³è½¬ï¼Œé‚£æ ·ä¼šå¯¼è‡´é¡µé¢é‡è½½ï¼Œ
      //- ç›¸æ¯”ä¹‹ä¸‹ç”¨router-linkæ˜¯é«˜æ•ˆçš„æ–¹æ¡ˆ
      //- toå±æ€§å°±æ˜¯é“¾æ¥çš„åœ°å€å•¦
      router-link(to="/") home
      router-link(to="/article") article
    bodyer
      //- è·¯ç”±åœ°å€æ‰€å¯¹åº”çš„æ¨¡æ¿å°†ä¼šè¢«æŒ‚è½½åˆ°router-viewæ ‡ç­¾ä¸Š
      router-view
</template>

<script>
  export default {
    data () {
      return {
      }
    }
  }
</script>

<style lang="stylus">
</style>
```
[åœ°å€](https://github.com/leenty/vue2/blob/master/src/App.vue)
å¥½äº†ï¼Œåˆ°æ­¤ä¸ºæ­¢å°±å®Œæˆäº†è·¯ç”±æ­å»ºä¸ä½¿ç”¨äº†ã€‚
